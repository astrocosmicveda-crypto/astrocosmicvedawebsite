<!DOCTYPE html>
<html lang="en">
<head>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9178717603014584"
     crossorigin="anonymous"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta http-equiv='cache-control' content='no-cache'> 
    <meta http-equiv='expires' content='0'> 
    <meta http-equiv='pragma' content='no-cache'>
    <meta name="description" content="Free Vedic Kundli Analysis - Discover your cosmic blueprint with detailed birth chart analysis, planetary positions, house lords, and astrological insights. Get personalized Vedic astrology readings in English and Hindi.">
    <meta name="keywords" content="vedic astrology, kundli, birth chart, horoscope, jyotish, astrological analysis, planetary positions, house lords">
    <meta name="author" content="AstroCosmicVeda">
    <title>Discover Your Cosmic Blueprint - Free Vedic Kundli Analysis</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="icon" type="image/png" href="homepagecircle.png">
<link href="https://fonts.googleapis.com/css2?family=Charter:wght@400;700&family=Merriweather:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <nav class="main-nav">
        <div class="nav-container">
            <a href="index.html" class="nav-logo">AstroCosmicVeda</a>
            <button class="nav-toggle" aria-label="Toggle navigation">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <ul class="nav-menu">
                <li><a href="index.html" class="nav-link active">Home</a></li>
                <li><a href="about.html" class="nav-link">About</a></li>
                <li><a href="contact.html" class="nav-link">Contact</a></li>
                <li><a href="privacy.html" class="nav-link">Privacy Policy</a></li>
            </ul>
        </div>
    </nav>
    
    <main class="main-content">
    <div id="mainContainer" class="container">
        <div class="header">
            <h1>Discover Your Cosmic Blueprint</h1>
            <h2>Vedic Kundli Analysis</h2>
            <p class="subtitle">Enter your birth details</p>
        </div>
        
        <div class="intro-content">
            <p>Welcome to AstroCosmicVeda, your trusted source for authentic Vedic astrology analysis. Our free Kundli analysis tool provides comprehensive insights into your birth chart, helping you understand the cosmic influences that shape your life.</p>
            
            <h3>What You'll Get</h3>
            <ul>
                <li><strong>Complete Birth Chart Analysis:</strong> Detailed planetary positions and their significance in your life</li>
                <li><strong>House Lord Effects:</strong> Understanding how each house lord influences different aspects of your life</li>
                <li><strong>Yoga Detection:</strong> Identification of auspicious and challenging yogas in your chart</li>
                <li><strong>Planetary Dignities:</strong> Analysis of planets in their own, exalted, or debilitated signs</li>
                <li><strong>Dasha Analysis:</strong> Current and upcoming planetary periods affecting your life</li>
                <li><strong>Bilingual Support:</strong> Available in both English and Hindi</li>
            </ul>
            
            <p>Simply enter your birth details below to receive your personalized Vedic astrology reading. Our analysis is based on authentic Jyotish (Vedic astrology) principles, ensuring accurate and meaningful insights.</p>
        </div>
        
        <div class="sample-report-section">
            <button type="button" id="viewSampleBtn" class="sample-report-btn">
                ðŸ“Š View Sample Report
            </button>
            <p class="sample-note">Want to see what a complete report looks like? Click above to view a sample Kundli analysis.</p>
        </div>
        
        <form id="kundliForm" class="kundli-form" action="javascript:void(0);">
            <div class="form-group">
                <label for="fullName">Full Name</label>
                <input 
                    type="text" 
                    id="fullName" 
                    name="fullName" 
                    placeholder="Enter your full name"
                    required
                >
            </div>
            
            <div class="form-group">
                <label for="dateOfBirth">Date of Birth</label>
                <input 
                    type="date" 
                    id="dateOfBirth" 
                    name="dateOfBirth" 
                    required
                >
            </div>
            
            <div class="form-group">
                <label for="timeOfBirth">Time of Birth</label>
                <input 
                    type="time" 
                    id="timeOfBirth" 
                    name="timeOfBirth"
                >
            </div>
            
            <div class="form-group">
                <label for="placeOfBirth">Place of Birth</label>
                <div class="searchable-dropdown">
                    <input 
                        type="text" 
                        id="placeOfBirth" 
                        name="placeOfBirth" 
                        placeholder="Search city or place..."
                        required
                        autocomplete="off"
                    >
                    <div id="dropdownList" class="dropdown-list hidden"></div>
                </div>
            </div>
            
            <div class="form-group">
                <label for="language">Language</label>
                <select id="language" name="language" required>
                    <option value="en">English</option>
                    <option value="hi">à¤¹à¤¿à¤‚à¤¦à¥€ (Hindi)</option>
                </select>
            </div>
            
            <button type="submit" class="submit-btn">
                Generate
            </button>
        </form>
        
        <div id="loadingMessage" class="loading hidden">
            <div class="spinner"></div>
            <p>Analyzing your birth chart...</p>
        </div>
        
        <div id="result" class="result hidden">
            <h2>Your Kundli Details</h2>
            <div class="result-content"></div>
        </div>
        
    </div>
    </main>

    <div id="articleView" class="article-view hidden">
        <div id="articleContent"></div>
    </div>

    <div id="cosmicChatbot" class="chatbot">
        <button id="chatbotToggle" class="chatbot-toggle" type="button">Ask Cosmic Guide</button>
        <div id="chatbotWindow" class="chatbot-window hidden" aria-live="polite">
            <div class="chatbot-header">
                <span>Cosmic Guide</span>
                <button id="chatbotClose" class="chatbot-close" type="button" aria-label="Close chat">Ã—</button>
            </div>
            <div id="chatbotMessages" class="chatbot-messages"></div>
            <form id="chatbotForm" class="chatbot-form" action="javascript:void(0);">
                <input type="text" id="chatbotInput" autocomplete="off" placeholder="Ask about your chartâ€¦" aria-label="Ask a question about your chart">
                <button type="submit">Send</button>
            </form>
        </div>
    </div>
    
    <!-- Firebase SDK -->
    <script type="module">
        // Import the functions you need from the SDKs you need
        // Updated to Firebase JS SDK v10.8.0 (includes fixes from v9.9.0+)
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js';
        import { getFirestore, doc, setDoc, getDoc, serverTimestamp, enableNetwork, disableNetwork } from 'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';
        
        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
            apiKey: "AIzaSyCZayQrEmdBrgjT1hfnK6UvbbluMM55RtY",
            authDomain: "astrocosmicveda-2d8d9.firebaseapp.com",
            projectId: "astrocosmicveda-2d8d9",
            storageBucket: "astrocosmicveda-2d8d9.firebasestorage.app",
            messagingSenderId: "863012994946",
            appId: "1:863012994946:web:3b46fe9a238e13f906d99b",
            measurementId: "G-NL3LT7CCMY"
        };
        
        try {
            // Initialize Firebase
            const app = initializeApp(firebaseConfig);
            const db = getFirestore(app);
            
            // Make db and Firestore functions available globally
            window.firestoreDb = db;
            window.firestoreFunctions = {
                doc: doc,
                setDoc: setDoc,
                getDoc: getDoc,
                serverTimestamp: serverTimestamp,
                enableNetwork: enableNetwork,
                disableNetwork: disableNetwork
            };
            
            // Test Firestore connection
            console.log('Firebase initialized successfully');
            console.log('Firestore database:', db);
            console.log('Project ID:', firebaseConfig.projectId);
            
            // Try to enable network and test connection
            enableNetwork(db).then(() => {
                console.log('Firestore network enabled');
            }).catch(error => {
                console.warn('Firestore network enable warning:', error);
            });
            
        } catch (error) {
            console.error('Firebase initialization error:', error);
            window.firestoreDb = null;
            window.firestoreFunctions = null;
        }
    </script>
    <script src="script.js"></script>
    <script>
        // Mobile navigation toggle
        document.addEventListener('DOMContentLoaded', function() {
            const navToggle = document.querySelector('.nav-toggle');
            const navMenu = document.querySelector('.nav-menu');
            
            if (navToggle && navMenu) {
                navToggle.addEventListener('click', function() {
                    navMenu.classList.toggle('active');
                });
                
                // Close menu when clicking on a link
                const navLinks = document.querySelectorAll('.nav-link');
                navLinks.forEach(link => {
                    link.addEventListener('click', function() {
                        navMenu.classList.remove('active');
                    });
                });
            }
            
            // Initialize tabs functionality
            initializeTabs();
        });
        
        // Initialize tabs functionality
        function initializeTabs() {
            const tabButtons = document.querySelectorAll('.tab-button');
            const tabContents = document.querySelectorAll('.tab-content');
            
            if (tabButtons.length === 0 || tabContents.length === 0) {
                return; // No tabs to initialize
            }
            
            tabButtons.forEach(button => {
                // Remove existing event listeners by cloning
                const newButton = button.cloneNode(true);
                button.parentNode.replaceChild(newButton, button);
                
                newButton.addEventListener('click', async function() {
                    const targetTab = this.getAttribute('data-tab');
                    
                    // Remove active class from all buttons and contents
                    document.querySelectorAll('.tab-button').forEach(btn => {
                        btn.classList.remove('active');
                        btn.setAttribute('aria-selected', 'false');
                    });
                    document.querySelectorAll('.tab-content').forEach(content => {
                        content.classList.remove('active');
                    });
                    
                    // Add active class to clicked button
                    this.classList.add('active');
                    this.setAttribute('aria-selected', 'true');
                    
                    const targetContent = document.getElementById('tab-' + targetTab);
                    if (targetContent) {
                        targetContent.classList.add('active');
                        
                        // Always check if content needs to be loaded (even if not a placeholder)
                        const placeholder = targetContent.querySelector('.tab-loading-placeholder');
                        const isEmpty = !targetContent.innerHTML.trim() || placeholder || targetContent.textContent.trim() === '';
                        
                        if (isEmpty || placeholder || !window.kundliTabData.generatedContent[targetTab]) {
                            // Show loading state
                            targetContent.innerHTML = `
                                <div style="text-align: center; padding: 40px 20px;">
                                    <div class="spinner" style="margin: 0 auto 20px;"></div>
                                    <p style="color: #666;">Loading content...</p>
                                </div>
                            `;
                            
                            // Load content on demand
                            try {
                                if (typeof window.loadTabContent === 'function') {
                                    const content = await window.loadTabContent(targetTab);
                                    targetContent.innerHTML = content;
                                } else {
                                    throw new Error('loadTabContent function not available');
                                }
                            } catch (error) {
                                console.error('Error loading tab content:', error);
                                targetContent.innerHTML = `
                                    <div style="padding: 20px; color: #f44336;">
                                        Error loading content: ${error.message}. Please try again.
                                    </div>
                                `;
                            }
                        }
                    }
                    
                    // Scroll to top of tabs container
                    const tabsContainer = this.closest('.tabs-container');
                    if (tabsContainer) {
                        const offsetTop = tabsContainer.offsetTop - 20;
                        window.scrollTo({
                            top: offsetTop,
                            behavior: 'smooth'
                        });
                    }
                });
            });
        }
        
        // Reinitialize tabs when new content is loaded
        window.reinitializeTabs = function() {
            initializeTabs();
        };
        
        // Initialize sidebar navigation
        function initializeSidebar() {
            const sidebarToggle = document.getElementById('sidebarToggle');
            const sidebar = document.getElementById('articleSidebar');
            const navLinks = document.querySelectorAll('.sidebar-nav-link');
            
            if (!sidebarToggle || !sidebar) return;
            
            // Initialize sidebar as visible (not hidden) by default on desktop
            if (window.innerWidth > 1024) {
                sidebar.classList.remove('hidden');
                sidebarToggle.classList.add('active');
                const mainContent = document.querySelector('.article-main-content');
                if (mainContent) {
                    mainContent.classList.remove('sidebar-hidden');
                }
            } else {
                // On mobile, start with sidebar hidden
                sidebar.classList.add('hidden');
                sidebarToggle.classList.remove('active');
                const mainContent = document.querySelector('.article-main-content');
                if (mainContent) {
                    mainContent.classList.add('sidebar-hidden');
                }
            }
            
            // Toggle sidebar
            sidebarToggle.addEventListener('click', function() {
                sidebar.classList.toggle('hidden');
                sidebarToggle.classList.toggle('active');
                const mainContent = document.querySelector('.article-main-content');
                if (mainContent) {
                    if (sidebar.classList.contains('hidden')) {
                        mainContent.classList.add('sidebar-hidden');
                    } else {
                        mainContent.classList.remove('sidebar-hidden');
                    }
                }
            });
            
            // Handle navigation clicks using event delegation
            sidebar.addEventListener('click', async function(e) {
                const link = e.target.closest('.sidebar-nav-link');
                if (!link) return;
                
                e.preventDefault();
                e.stopPropagation();
                
                const targetId = link.getAttribute('href') ? link.getAttribute('href').substring(1) : '';
                const tabKey = link.getAttribute('data-tab');
                
                console.log('Sidebar link clicked:', { targetId, tabKey, href: link.getAttribute('href') });
                
                // Update active state
                const allNavLinks = document.querySelectorAll('.sidebar-nav-link');
                allNavLinks.forEach(l => l.classList.remove('active'));
                link.classList.add('active');
                
                // Check if this is a tab that needs dynamic loading
                if (tabKey) {
                    console.log('Loading tab:', tabKey);
                    // Hide all sections except birth-details and header/intro
                    const sectionsToHide = ['planetary-positions', 'house-lords', 'house-effects'];
                    sectionsToHide.forEach(sectionId => {
                        const section = document.getElementById(sectionId);
                        if (section) {
                            section.style.display = 'none';
                        }
                    });
                    
                    // Ensure header, intro, and birth-details are visible
                    const header = document.getElementById('article-header');
                    const intro = document.getElementById('article-intro');
                    const birthDetails = document.getElementById('birth-details');
                    const dynamicArea = document.getElementById('dynamic-content-area');
                    
                    if (header) header.style.display = 'block';
                    if (intro) intro.style.display = 'block';
                    if (birthDetails) birthDetails.style.display = 'block';
                    if (dynamicArea) dynamicArea.style.display = 'block';
                    
                    // Hide the footer note that appears after house-effects
                    const footerNote = dynamicArea?.nextElementSibling;
                    if (footerNote && footerNote.classList.contains('article-intro')) {
                        footerNote.style.display = 'none';
                    }
                    
                    // Scroll to top
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                    
                    // Show loading in dynamic content area
                    if (!dynamicArea) {
                        console.error('Dynamic content area not found!');
                        alert('Error: Content area not found. Please refresh the page.');
                        return;
                    }
                    
                    // Clear any existing content and show loading
                    dynamicArea.innerHTML = `
                        <div style="text-align: center; padding: 40px 20px;">
                            <div class="spinner" style="margin: 0 auto 20px;"></div>
                            <p style="color: #666;">Loading content...</p>
                        </div>
                    `;
                    
                    // Load content
                    try {
                        console.log('Checking for loadTabContent function...', typeof window.loadTabContent);
                        if (typeof window.loadTabContent === 'function') {
                            console.log('Calling loadTabContent with key:', tabKey);
                            const content = await window.loadTabContent(tabKey);
                            console.log('Content loaded, length:', content ? content.length : 0);
                            if (dynamicArea) {
                                dynamicArea.innerHTML = content;
                            }
                            
                            // Initialize Dasa predictions handler if this is the Dasa Predictions tab
                            if (tabKey === 'dasaPredictions' && typeof window.initializeDasaPredictionsHandler === 'function') {
                                setTimeout(() => {
                                    window.initializeDasaPredictionsHandler();
                                }, 100);
                            }
                            
                            // Scroll to top after content loads
                            setTimeout(() => {
                                window.scrollTo({ top: 0, behavior: 'smooth' });
                            }, 100);
                        } else {
                            console.error('loadTabContent function not available!');
                            throw new Error('loadTabContent function not available. Please refresh the page.');
                        }
                    } catch (error) {
                        console.error('Error loading tab content:', error);
                        if (dynamicArea) {
                            dynamicArea.innerHTML = `
                                <div style="padding: 20px; color: #f44336;">
                                    <strong>Error loading content:</strong> ${error.message}<br>
                                    <small>Please check the browser console for details.</small>
                                </div>
                            `;
                        }
                    }
                } else {
                    // Regular section - show all sections and scroll to target
                    const sectionsToShow = ['planetary-positions', 'house-lords', 'house-effects'];
                    sectionsToShow.forEach(sectionId => {
                        const section = document.getElementById(sectionId);
                        if (section) {
                            section.style.display = 'block';
                        }
                    });
                    
                    // Show the footer note
                    const dynamicArea = document.getElementById('dynamic-content-area');
                    if (dynamicArea) {
                        const footerNote = dynamicArea.nextElementSibling;
                        if (footerNote && footerNote.classList.contains('article-intro')) {
                            footerNote.style.display = 'block';
                        }
                    }
                    
                    // Scroll to target section
                    const targetElement = document.getElementById(targetId);
                    if (targetElement) {
                        const offsetTop = targetElement.offsetTop - 100;
                        window.scrollTo({
                            top: offsetTop,
                            behavior: 'smooth'
                        });
                    }
                }
                
                // Close sidebar on mobile after clicking
                if (window.innerWidth <= 1024) {
                    sidebar.classList.add('hidden');
                    sidebarToggle.classList.remove('active');
                    const mainContent = document.querySelector('.article-main-content');
                    if (mainContent) {
                        mainContent.classList.add('sidebar-hidden');
                    }
                }
            });
            
            // Highlight active section on scroll
            const observerOptions = {
                root: null,
                rootMargin: '-100px 0px -50% 0px',
                threshold: 0
            };
            
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const id = entry.target.getAttribute('id');
                        navLinks.forEach(link => {
                            link.classList.remove('active');
                            if (link.getAttribute('href') === `#${id}`) {
                                link.classList.add('active');
                            }
                        });
                    }
                });
            }, observerOptions);
            
            // Observe all sections
            document.querySelectorAll('.article-section').forEach(section => {
                observer.observe(section);
            });
        }
        
        // Reinitialize sidebar when new content is loaded
        window.reinitializeSidebar = function() {
            setTimeout(initializeSidebar, 100);
        };
    </script>
    
    <footer class="main-footer">
        <div class="footer-container">
            <div class="footer-section">
                <h3>AstroCosmicVeda</h3>
                <p>Discover your cosmic blueprint through authentic Vedic astrology analysis.</p>
            </div>
            <div class="footer-section">
                <h4>Quick Links</h4>
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="about.html">About Us</a></li>
                    <li><a href="contact.html">Contact</a></li>
                    <li><a href="privacy.html">Privacy Policy</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4>Services</h4>
                <ul>
                    <li><a href="index.html">Free Kundli Analysis</a></li>
                    <li><a href="index.html">Birth Chart Reading</a></li>
                    <li><a href="index.html">Planetary Positions</a></li>
                    <li><a href="index.html">House Lord Analysis</a></li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 AstroCosmicVeda. All rights reserved.</p>
            <button id="chatbotToggle" class="chatbot-toggle" type="button">Ask Cosmic Guide</button>
        </div>
    </footer>
</body>
</html>
